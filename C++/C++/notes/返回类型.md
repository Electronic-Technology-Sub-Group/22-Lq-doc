
一个函数可以在执行完成后返回一个值，表示其运行结果，如：

```c++
int sum(int a, int b) {
    return a + b;
}

int main() {
    int v = sum(3, 5); // v = 8
}
```

`C++` 中使用 `return` 返回一个函数的结果给调用者，其返回的类型应当与函数标注的返回值类型相同。

`return` 可以在函数的任意位置，返回数据后函数将结束，之后的代码将会被忽略

```c++
#include<iostream>

int sum(int a, int b) {
    int r = a + b;
    return r;
    // 不会执行，因为函数已经 return，已经结束了
    std::cout << a << "+" << b << "=" << r;
}
```

若一个函数没有返回值，则使用 `void` 表示函数返回类型，`return` 后面不带数据。若 `return` 为最后一行语句，可省略

```c++
#include<iostream>

void check(int value) {
    if (value > 0) {
        std::cout << "Positive number";
        return;
    }

    if (value < 0) {
        std::cout << "Negative number";
        return;
    }

    std::cout << "Zero number";
    // 最后一行 return 可省略
    // return;
}
```

# 返回方式

若返回类型是[[引用]]类型，值不会进行复制，否则返回的是数据的副本。

```c++
int sum(int a, int b) {
    // 这一句进行的操作：
    //   创建一个临时变量 t = a + b（可以在内存或寄存器中）
    //   将 t 的值复制一份，返回给调用位置
    return a + b;
}
```

一般不会返回一个引用类型，直接返回在一个函数中创建的自动变量的引用是非常危险的

```ad-warning
**永远不要**返回一个在函数栈中创建的对象的指针或引用，也不要将其以任何方法传递到函数之外
```

主要原因是，函数中的自动变量位于函数自己的栈中，当函数返回时，其栈空间内存会自动释放（根据编译器不同，可能表示为清空或标记为无效）。释放过的内存可以被重新申请，其存储的值是不可预测的。

# 尾置返回值

返回值可以放在函数头的尾部，原本返回值位置使用[[auto]]占位，称为[[尾置返回值]]。

```c++
auto add(int a, int b) -> int {
    return a + b;
}
```
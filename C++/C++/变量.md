C++ 的变量代表一块可访问的内存空间，每个变量的类型应当在其声明时便已确定，并有一个合法的[[标识符]]作为其名称。

# 声明

变量通过 `变量类型 变量名1[, 变量名2, ...]` 的形式进行声明，每个变量都对应一个内存地址。

```c++
int a;
int b, c;
```

在值类型和指针类型变量在声明时便会初始化默认值，通常为数值 0 或其等价的值（`'\0'`，`nullptr` 等），类，结构体等会使用无参构造进行初始化。但还是建议在声明后手动初始化。

```c++
int a = 10;
int b (10);
int c {10};
```

这三种方法都可以，但推荐使用第三种，使用初始化列表可以统一所有类型的初始化。

# 常量

无法被修改的变量称为常量。常量对编译器可见。

常量使用 `const` 修饰，在声明时应当显式的初始化其值。

常量只能使用字面量，常量表达式和编译期函数进行初始化。

```c++
const int a = 100;
```

# 作用域

作用域是一个成员可以被访问到的范围。

对于直接在一个源文件中声明的变量，类，函数等，其作用域为整个程序（包括include了该文件的）代码中：

```c++
// a.h
int a {5};

int b() {
    return 10;
}
```

```c++
// main.h
#include "a.h"

int main() {
    int c = b(); // 10
    int d = c + a; // 10 + 5 = 15
}
```

若该成员在一个命名空间中，则所在命名空间便是其作用域，不同文件相同命名空间的成员在同一个作用域

若该成员在一个函数，类或代码块中，则其所在的上下文（即最近一层 `{}` 包围的区域）便是其作用域

同一个作用域中不能存在标识符相同的成员，但若成员所在作用域的上层作用域中存在同名成员是允许的，该成员会在其生效后（声明后）隐藏上层同名成员

```c++
int a {10};

int getA();

int main() {
    int b {10};
    int c1 = a + b; // c1 = 10 + 10 = 20
    int a {5}; // 没问题，会自动隐藏值为 10 的那个 a
    int c2 = a + b; // c2 = 5 + 10 = 15
    int c3 = getA() + b; // c3 = 10 + 10 = 20
}

int getA() {
    // 由于其作用域不在 main 中，a 仍然访问的是值为 10 的 a
    return a; // 10
}
```

函数参数的作用域位于函数内，`for`，`while` 等循环语句初始化列表的作用域位于循环体内。

## 代码块

使用 `{}` 包围的一段代码，具有独立的作用域

```c++
void main() {
    int a {10};
    {
        int b {20};
    }
    // 编译错误：找不到变量 b
    b = 30;
}
```

# 生存期

## 自动存储时间

在代码块中直接声明的变量，生存期从声明开始，直到代码块结束。

直接声明的变量存在于栈中，`C++` 默认一个函数的栈帧长为 1MB

## 静态存储时间

在代码块内部通过 `static` 声明的变量，或在所有代码块和类之外声明的变量

生存期从程序创建开始，直到程序释放结束。

## 动态存储时间

使用 `new` 在堆上申请的内存，生存期持续到 `delete` 释放
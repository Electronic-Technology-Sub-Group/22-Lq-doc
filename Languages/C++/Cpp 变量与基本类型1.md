`C++` 是静态强类型语言，每个量都有其类型，变量的类型决定了其行为和指向（占用）内存的大小。

`C++` 的类型可分为值，指针和引用三大类，每个类型还可以有不同的类型别名。

```ad-info
不像 `Java`，`C#` 等语言，`C++` 没有一个类似 `Object` 的类型可以作为所有类型的基类。但其指针类型则可以通过 `void*` 类型表示 
```

值类型是指在声明时会自动申请一块新的内存空间的类型，包括基本数据类型和复合类型。

当值类型之间互相传递，包括互相赋值，函数传参，函数返回值等时，实际传递的是数据的副本，对其修改不会影响到原数据。

```c++
#include <iostream>

using namespace std;

int main() {
    int a {1};
    int b = a; // 将 a 的值传递给 b，传递的是 a 的副本
    b = b + 1;
    cout << "a = " << a << endl;
    cout << "b = " << b;
}
```

![[value.png]]

# 变量

C++ 的变量代表一块可访问的内存空间，每个变量的类型应当在其声明时便已确定，并有一个合法的标识符作为其名称。

![[标识符]]

变量通过 `变量类型 变量名1[, 变量名2, ...]` 的形式进行声明，每个变量都对应一个内存地址。

```c++
int a;
int b, c;
```

在值类型和指针类型变量在声明时便会初始化默认值，全局中为数值 0 或其等价的值（`'\0'`，`nullptr` 等），类，结构体等会使用无参构造进行初始化，局部则为随机值。建议在声明后手动初始化。

```c++
int a = 10;
int b (10);
int c {10};
```

这三种方法初始化方式都可以，但推荐使用第三种，使用初始化列表可以统一所有类型的初始化。

## 常量

无法被修改的变量称为常量，使用 const 修饰，在声明时应当显式的初始化其值。

```c++
const int a = 100;
```


# 基本类型

基本数据类型是 C++ 内置的数据类型

## 整型

`C++` 包含四种类型的整型，每种类型又分有符号和无符号两种。不同类型可以表示不同范围的数字，占用不同的内存空间大小。

| 数据类型             | 简写               | 内存（字节） | 值域                                    | 字面量标记 | 实例           |
| -------------------- | ------------------ | ------------ | --------------------------------------- | ---------- | -------------- |
| signed short int     | short              | 2            | $[-2\times 10^{15}, 2\times 10^{15}]$   | 无         |                |
| unsigned short int   | unsigned short     | 2            | $[0, 2\times 10^{16}]$                  | 无         |                |
| signed int           | int                | 4            | $[-2\times 10^{31}, 2\times 10^{31}-1]$ | 普通整数   | 3, -40         |
| unsigned int         | unsigned int       | 4            | $[0, 2\times 10^{32}]$                  | u 或 U     | 10u, 8U        |
| signed long int      | long               | 4 或 8       |                                         | l 或 L     | 123456l        |
| unsigned long int    | unsigned long      | 4 或 8       |                                         | ul 或 UL   | 12345ul        |
| signed long long int | long long          | 8            | $[-2\times 10^{63}, 2\times 10^{63}-1]$ | ll 或 LL   | -123ll, 321LL  |
| unsigned long long   | unsigned long long | 8            | $[0, 2\times 10^{64}]$                  | ull 或 ULL | 456ull, 654ULL |

```ad-info
`long int` 系列类型长度为 4 或 8，由具体编译器及其参数决定，默认情况下 VS 和 g++ 默认都是 4 字节，表示的大小范围也与对应的 `int` 类型相同，一般不用。
```

整型类型可以使用科学计数法，使用 `e` 或 `E` 加数字表示 `10^n`。

```c++
int a {5e3};  // 5000
```

## 字符

字符类型表示一个字符，包含两种类型：

| 类型    | 占用内存（字节） | 使用场景                      | 字面量标记 | 实例      |
| ------- | ---------------- | ----------------------------- | ---------- | --------- |
| char    | 1                | 英文字符，控制符等 ASCII 字符 | ' '        | 'a', '\n' |
| wchar_t | 2                | 中文字符等 Unicode 字符       | L' '       | L'好'     |

```ad-info
`unsigned char` 类型是 Viscal C++ 定义的一个无符号类型，但不属于 `C++` 标准类型
```

- char 类型转换为整型后，其他小等于其 ASCII 码大小，通常为无符号但不绝对，大小范围在 $[0, 255]$。

### 转义

字符及字符串中，使用 `\` 表示转义字符，用于替代有其他意义的字符、控制字符等无法直接表示的字符。

常用的转义字符有
- 具有特殊意义的字符，如 `\"`,  `\'` 等用于表示 " 和 '，`\\` 用于表示 `\`，`\?` 用于在某些会引起歧义的特殊情况下表示 ? 等
- 控制字符，如 `\n` 表示换行，`\t` 表示 Tab 等

## 浮点

浮点型用于表示小数，采用 IEEE 754 标准表示法，根据其占用空间大小不同可分为以下三种，可表示的精度和值域范围也不同，使用 `float` 和 `double` 声明。

| 类型        | 占用内存（字节） | 值域        | 精度             |
| ----------- | ---------------- | ----------- | ---------------- |
| float       | 4                | ±3.4e(±38)  | 约 7 位小数准确  |
| double      | 8                | ±1.7e(±308) | 约 15 位小数准确 |
| long double | 8 或 16          |             |                  |

浮点数类型可以使用科学计数法，使用 `en` 或 `En` 表示 `10^n`。若整数部分为 0，可省略 0。

```c++
double a {1.0e5};
double b {1.0e-5};
double c {.345};
```

![[float.png]]

## bool

布尔值类型 `bool` 仅有 `true` 和 `false` 两个值，占用一个字节，常用于逻辑判断。

```ad-note
`bool` 类型是 `C++` 新增的基本类型，输出时表现为 1 或 0
```

```c++
#include <iostream>

using namespace std;

int main() {
    bool a {true};
    bool b {false};
    cout << "a=" << a << ", b=" << b << endl
}
```

![[bool.png]]

- `true` 转换为整型后结果为 `1`，`false` 转换为整型后结果为 `0`

# 运算符

运算符表示两个变量之间的运算类型，包括赋值运算符，算术运算符，逻辑运算符，指针运算符等，不同运算符之间有不同的运算符优先级，相同优先级的运算符从左向右逐步计算。

运算符的效果分为结果和副作用两部分，副作用为除产生运算结果外的其他效果。

- 赋值运算符
	- `=`：将一个值（字面量，表达式值，变量等）传递给等号前的变量
	- `op=`：`op` 表示任意一个二元运算符，`a op= b` 等效于 `a = a op b`
- 自增/自减运算符
	- `++`，`--`：副作用为自增/自减 1，但`++/--`放在前面运算结果是自增后的值，放在后面为自增前的值
- 算术运算符：数字之间的数学运算
	- `+`, `-`, `*`：与数学上完全相同
	- `+` / `-` 在表示一个数字的正负值时也是运算符
	- `/`：与数学上的除法不同，若两个整型相除，返回值仍为整型，小数部分将直接忽略
	- `%`：取余（取模）
	- 位运算符：按二进制位进行运算
		- `&`, `|`, `^`, `~`  分别表示 且，或，异或，非
		- `<<`, `>>` 表示按位左/右移
- 逻辑运算符：针对 `bool` 类型的运算
	- `!`, `&&`, `||` 分别表示 非，且，或
- 比较运算符：由其他类型生成 `bool` 类型值的运算，主要是大小关系的比较
	- `==`， `!=`，`>`，`>=`，`<`，`<=`：传统相等/不等/大小比较
	- `<=>`
- 其他运算符：函数调用，逗号运算符 `,`，条件运算符 `?:` 等

可以说，我们程序的数据操作，除了函数调用，大部分都是在与运算符打交道

```ad-seealso
C++ 中其他运算符：
- 成员访问运算符：包括下标访问，成员访问，指针取址和寻址等都算
	- 访问成员：下标运算符`[]`，作用域解析 `::`，成员访问 `.`
	- 指针相关：取址 `&`，寻址 `*`，指针访问 `->` 等
- 特殊运算符：类型转换，`new`，`delete`，`sizeof`，`typeid`，`noexcept`，`alignof` 甚至 `throw` 等关键字都是运算符

```

## <=> 运算符

C++ 20 新增。实现了 `<=>` 运算符的类或结构体相当于同时生成 `==`，`!=`，`<`，`>`，`<=`，`>=`。
- `(a <=> b) < 0` 相当于 `a<b`
- `(a <=> b) > 0` 相当于 `a>b`
- `(a <=> b) == 0` 相当于 `a==b`

## 优先级

自上而下不断降低，未标记自左向右降低：（里面混入了一些奇怪的东西，可以先忽略）
-   `::`, `()`, `[]`, `->`, 后缀 `++`、`--`, `typeid`, 类型强制转换
-   自右向左降低：`!`, 正负值`+`、`-`, 前缀 `++`、`--`, 取址 `&`, `*`, 类型强转`()`, `sizeof`, `decltype`, `new`, `new[]`, `delete`, `delete[]`
-   `.*`, `->*`
-   算术运算 `*`, `/`, `+`, `-`, `<<`, `>>`
-   位与布尔运算 `==`, `!=`, `&`, `^`, `|`, `&&`, `||`
-   `?:`
-   自右向左降低：`=`, `*=`, `/=`, `%=`, `+=`, `-=`, `&=`, `^=`, `|=`, `<<=`, `>>=`
-   `throw`, `,`

## 类型提升

`bool` = `unsigned short` = `short` = `char` < `int` < `unsigned int` < `long` < `unsigned long` < `long long` < `unsigned long long` < `float` < `double` < `long double` 

数学运算中，类型会被提升到参与运算类型中能表达范围最大的数据类型；若参与运算的所有类型均在 `int` 之下，则直接提升到 `int`

布尔运算中，所有数字 `0`，字符 `\0`，指针 `nullptr` 相当于 `false`；而其他值转换为 `bool` 都为 `true`

---
参考1: https://zhuanlan.zhihu.com/p/363757919
参考2: https://ruanyifeng.com/blog/2017/02/fp-tutorial.html
参考3: https://llh911001.gitbook.io/mostly-adequate-guide-chinese/
---
函数式编程属于声明式编程的一种，脱胎自数学的范畴论，使用数学表达式的方式处理数据。

> [!note]- 命令式编程
> 面向计算机硬件的抽象，存在变量、赋值语句、表达式、控制语句等组成，关注计算机的详细执行步骤，一步步告诉计算机要怎么做
> - 大部分通用性编程语言，包括 C/C++，Java，Python，C# 等都是命令式编程语言
> - 面向对象、面向过程思想都属于命令式编程思想

> [!note]- 声明式编程
> 以数据结构的形式表达程序执行的逻辑，告诉计算机应该做什么，而不是具体要怎么做，因此通常不需要声明变量，也不需要包含循环控制语句。
> - SQL 就是一种典型的声明式编程语言

> [!note]- 函数式编程
> 函数式编程思想脱胎于范畴论，本质是数学工具的编程实现。函数的值仅取决于函数参数，不依赖于其他状态。
> 
> 大多数通用语言通过闭包或类似的技术实现函数式编程，如 Java，C++ 或 JavaScript 的 lambda 表达式等。也有纯函数式语言，如 Haskell 等
# 函数

函数式编程中的函数指的是数学中的函数，即自变量的映射，具有以下特点：
- 函数是一等公民，即与其他数据类型具有相同地位，可用于参数、赋值等
- 函数是纯函数
## 纯函数

> [!note]- 纯函数
> 纯函数是这样一种函数，即相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用。
> 
> 副作用：与函数外部环境发生任何交互，包括但不限于任何对函数之外的状态发生改变，用户输入输出交互，HTTP 请求等

纯函数为函数式编程带来了很多优点：
- 可缓存性 Cacheable：纯函数可方便的根据输入做缓存
	- 延迟执行
- 可移植性 Portable：纯函数计算结果与外界环境无关，且不与外界产生任何交互
- 自文档化 Self-Documenting：依赖明确，便于观察和理解
- 可测试性 Testable：允许方便的自动生成输入并断言输出，不需要模拟外部环境
- 合理性 Reasonable：纯函数总是符合引用透明性的
- 并行性：纯函数不需要任何共享内存

> [!note]- 引用透明性
> 一段代码可以替换成它执行所得的结果，而且是在不改变整个程序行为的前提下替换的，那么我们就说这段代码是引用透明的
## 函数运算

函数基本运算包括函数合成（Compose）和柯里化（Curry）。
### 柯里化

> [!note]- 柯里化
> 柯里化 Curry 指只传递给函数一部分参数来调用它，让它返回一个函数去处理剩下的参数。

只传给函数一部分参数通常也叫做部分求值或局部调用，函数接收一些函数但不立即求值，而是返回一个保存有已有参数的新函数，直到所有参数都传入时再求值，能够大量减少样板文件代码。

`curry` 函数也是一个纯函数。每通过 `curry` 传递一个参数调用函数，就返回一个确定的新函数处理剩余的参数。某些实现中 `curry` 函数也允许一次传递多个参数，等效于多次调用 `curry` 函数。以下是 `curry` 函数的一个 Java 实现

```java
// Function3 接口
interface Function3<T1, T2, T3, R> { R invoke(T1 v1, T2 v2, T3 v3); }

// curry 方法的一种简单实现
<T1, T2, T3, R> BiFunction<T2, T3, R> curry(Function3<T1, T2, T3, R> func, T1 v1) {
    return (v2, v3) => func(v1, v2, v3);
}
```
### 代码组合

函数合成是指将多个函数组合后生成新函数的过程
## 高阶函数

满足以下特点之一的函数称为高阶函数
- 接受函数作为参数，如集合中常见的 `map`，`foreach`，`reduce` 等
- 返回值是一个函数，如柯里化方法等
# 类型签名
# 函子
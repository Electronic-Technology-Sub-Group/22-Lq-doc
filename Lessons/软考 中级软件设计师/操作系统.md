# 概念

作用
- 管理系统硬件、软件、数据资源
- 控制程序运行
- 人机之间的接口
- 应用软件与硬件之间的接口

功能
- 进程管理
- 存储管理
- 文件管理
- 作业管理
- 设备管理

分类
- 批处理操作系统
	- 单道批：一次一个作业入内存，作业由程序、数据、说明书组成
	- 多道批：一次多个作业入内存，宏观并行，微观串行
- 分时操作系统：时间片轮转方式为多个用户提供服务，每个用户感觉独占。多路性，独立性，交互性，及时性
- **实时操作系统**：包括实时控制系统和实时信息系统，交互能力要求不高，可靠性要求高
- 网络操作系统：有效共享网络资源，提供服务软件和有关协议的集合（Unix，Linux，WindowsService 等）
- 分布式操作系统：任意两台计算机可以通过通信交换信息，是网络操作系统的高级形式。透明性、可靠性、高性能
- 微机操作系统：Windows、Linux
- **嵌入式操作系统**：运行在智能芯片中，微型化，可定制（针对硬件变化配置），实时性，可靠性，易移植性（HAL、BSP）
# 进程

进程：程序在一个数据集合上的运行过程，是系统进行资源分配和调度的独立单位，可独立调度和分配资源的基本单位
- 由程序块、进程控制块 PCB、数据块三部分组成
- PCB：进程存在的唯一标志，包括进程标识符，状态，位置信息，控制信息，队列指针（链接其他同一状态的进程），优先级，现场保护等数据
## 线程

进程可以包含多个线程，线程之间可以共享部分资源

![[Pasted image 20240301173951.png]]
## 进程状态
### 三态模型

![[Pasted image 20240301174239.png]]

运行：进程在 CPU 中运行。单处理机系统一次只有一个进程在运行
就绪：进程获得了除 CPU 外一切资源，一旦等到处理机即可运行
阻塞：又称等待或睡眠，进程需要等待某个非 CPU 资源（等待某一事件发生，如 IO 完成等）而暂停运行
## 五态模型

阻塞和就绪状态可以挂起到对应的就绪状态

![[Pasted image 20240301174653.png]]

挂起原因：
- 进程过多，主存资源不足，进程被挂起到磁盘对换区，暂不参与调度，平衡系统负载
- 系统出现故障，或用户调试程序，将程序挂起检查问题
## 进程调度
### pv 操作

临界资源：进程间需要互斥方式进行共享的资源
临界区：进程中访问临界资源的代码
进程因互斥关系产生的制约称为间接制约关系；因速度差异需要等待的制约称为直接制约关系

![[Pasted image 20240301175855.png]]

S：信号量：一种特殊的全局变量，可以表示（非CPU）资源数量，当信号量为负时也可以表示排队进程数
P(S)：Passeren，通常表示加锁（资源消耗）过程的原语
- S<0 表示资源不足
V(S)：Verhoog，通常表示解锁（资源释放）过程的原语
- 阻塞队列 <0 表示没有进程排队
**PV 操作可能发生死锁**

![[Pasted image 20240301180108.png]]
### 信号量与 pv 操作

![[Pasted image 20240303005932.png]]
- 互斥模型：多个进程共享同一资源
	- S：互斥信号量，初始值为 1
	- 互斥量 S 对资源加锁
	- 单个进程中 `P(S)`，`V(S)` 必定成对出现，且先出现 `P(S)`

![[Pasted image 20240303010649.png]]
- 同步模型：单缓冲区生产者 - 消费者问题，同时具有同步和互斥模型
	- $S_1$、$S_2$ 为同步信号量， $S_1$ 针对缓冲区资源，初值为 1（缓冲区大小）；$S_2$ 针对产品资源，初值为 0
	- S 为互斥信号量，代表缓冲区的访问权，初值为 1
	- 每个进程中各有一个针对同步信号量的 `P`、`V` 操作，两个进程互相配对
	- 每个进程中各有一组针对互斥信号量的 `P`、`V` 操作
	- 临界资源为缓冲区 S
### 前趋图与 pv 操作

![[Pasted image 20240303012037.png]]
- 每一条有向线段的起点是前驱，指向的节点是后继
- 前驱活动使用 `V` 操作表示任务完成，后继操作通过 `P` 操作检查确保前驱完成
	- 每个箭头流出对应一个 `V` 操作，每个箭头流入对应一个 `P` 操作
# 死锁

死锁：两个以上进程互相要求对方占用的资源导致无法继续运行的现象
条件：
- 互斥
- 保持和等待（无法获取资源时不会放弃任务）
- 不剥夺（不能使其他进程放弃资源）
- 环路等待
预防死锁：
- 有序资源分配
- 静态资源分配
避免：银行家算法
鸵鸟策略：不予理睬

系统必定死锁的最大资源数$=w-1$
系统不可能发生死锁的最小资源数$=(w-1)\times m+1\leq n$
- w：每个进程要求资源数
- m：进程数
![[Pasted image 20240303014515.png]]
**注意：看好题目要求不可能发生死锁、一定发生死锁还是可能发生死锁的情况**
# 进程资源图
# 段页式存储
# 磁盘管理
# IO 管理软件
# 文件管理
# 作业管理
# 组件链传递

组件链传递可以使父组件向所有子组件广播消息。父组件通过 `provide` 选项提供数据，子组件通过 `inject` 使用数据。

在父组件中，使用 `provide` 声明一个变量。这个变量将传递给子组件

```js
const app = Vue.createApp({
    data() {
        return {
            todos: ['Feed a cat', 'Buy tickets']
        }
    },
    provide() {
        return {
            // 向子组件传递 todoLength 值
            todoLength: this.todos.length
        }
    }
})
```

在子组件中，使用 `inject` 声明一个列表，该列表中包含了可接受属性

```js
app.component('todo-list', {
    props: ['todos'],
    components: {
        'todo-son': {
            inject: ['todoLength'],
            template: '#grandson'
        }
    },
    template: '#son'
})
```

`app` 将 `todoLength` 通过 `provide` 提供给内部组件，`todo-son` 使用 `inject` 接收 `provide` 传递的 `todoLength` 变量

对应的 HTML 元素代码为：

```html
<template id="son">
    <div>{{todos.length}}</div>
    <todo-son></todo-son>
</template>
```

```html
<template id="grandson">
    <div>{{todoLength}}</div>
</template>
```

```html
<div id="provide-inject">
    <todo-list :todos="todos">
    </todo-list>
</div>
```

使用组件链传递可以方便的将变量向深层子元素传递数据。

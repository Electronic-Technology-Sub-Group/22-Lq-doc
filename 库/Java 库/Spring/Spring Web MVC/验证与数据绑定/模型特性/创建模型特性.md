# 创建模型特性

`@ModelAttribute` 注解应用于方法时，表示该方法向 `Model` 提供一个或多个模型特性，`value` 参数表示提供的模型名，省略使用首字母小写的类名

模型特性会自动添加到 `Model` 对象上。如果直接返回 `ModelAndView` 会覆盖其中的值，可以返回字符串表示视图名称，并通过参数传入的 `Model` 对象附加数据。

```java
@PostMapping(params = "fdAction=createFDForm")
public String showOpenFixedDepositForm(Model model) {
    // 在这里的时候，getFixedDepositDetails() 已经被调用了
    // 此时 model 中已经存在 fixedDepositDetails 对象了
    model.addAttribute("errors", Map.of());
    return "createFixedDepositForm";
}

@ModelAttribute("fixedDepositDetails")
public FixedDepositDetails getFixedDepositDetails() {
    FixedDepositDetails fixedDepositDetails = FixedDepositDetails.builder()
            .email("You must enter a valid email")
            .build();
    LOGGER.info("getFixedDepositDetails() called, return a new instance of FixedDepositDetails");
    return fixedDepositDetails;
}
```

`@ModelAttribute` 注解的方法与 `@RequestMapping` 注解的方法是一致的，因此可以在一个函数中同时使用两个注解，也可以在一个 `@ModelAttribute` 注解的方法中传入 `Model` 变量，添加多个模型特性。

当 `@ModelAttribute` 与 `@RequestMapping` 注解同时存在时，其返回值被认为是模型特性而非视图名称。此时视图名称由 Spring 的 RequestToViewNameTranslator<sup>(默认使用 DefaultRequestToViewNameTranslator，使用删除前导、尾部/ 和扩展名后剩余部分作为视图名称：  - http://localhost:8080/doSomething.html 解析后为 doSomething  - http://localhost:8080/fixedDepositDetails/list 解析后为 fixedDepositDetails/list)</sup> 类决定。

```java
@RequestMapping("/fixedDeposit")
public class FixedDepositController {
    // 视图名称: fixedDeposit/list.html
    @GetMapping(path = "/list")
    @ModelAttribute("fdList")
    public List<FixedDepositDetails> listFixedDeposits() {
        return fixedDepositService.getFixedDeposits();
    }
}
```

当 `@ModelAttribute` 与 `@RequestMapping` 注解同时存在时，仅会在请求符合要求时才创建该对象。

‍

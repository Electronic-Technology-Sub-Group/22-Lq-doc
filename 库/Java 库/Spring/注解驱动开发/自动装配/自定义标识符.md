# 自定义标识符

`@Qualifier` 作为元注解时，其作用是声明自定义限定符注解，即使用自定义的几个标志作为自动装配的依据。

1. 使用 `@Qualifier` 创建一个注解

    根据 `BankType` 和 `TransformMode` 两个枚举选择具体的 `bean` 类。我们自定义的标识符就是 `BankType` 和 `TransformMode` 两个枚举值的排列组合。

    ```java
    public enum BankType {
        SAME, DIFF
    }
    ```

    ```java
    public enum TransformMode {
        IMMEDIATE, NORMAL
    }
    ```

    ```java
    @Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})
    @Retention(RetentionPolicy.RUNTIME)
    @Qualifier
    public @interface FundTransfer {

        TransformMode transformSpeed();
        BankType bankType();
    }
    ```
2. 通过 `CustomAutowireConfigurer` 注册注解

    ```xml
    <bean class="org.springframework.beans.factory.annotation.CustomAutowireConfigurer">
        <property name="customQualifierTypes">
            <set>
                <value>com.example.mybank.annotation.FundTransfer</value>
            </set>
        </property>
    </bean>
    ```
3. 创建不同的 bean 类，对不同类使用不同标识符进行注解。

    ```java
    @Service
    @FundTransfer(
      transformSpeed = TransformMode.IMMEDIATE,
      bankType = BankType.DIFF)
    public class ImmediateDiffBank
     implements FundTransferService {
    }
    ```

    ```java
    @Service
    @FundTransfer(
      transformSpeed = TransformMode.IMMEDIATE,
      bankType = BankType.SAME)
    public class ImmediateSameBank
     implements FundTransferService {
    }
    ```

    ```java
    @Service
    @FundTransfer(
      transformSpeed = TransformMode.NORMAL,
      bankType = BankType.DIFF)
    public class NormalDiffBank
     implements FundTransferService {
    }
    ```

    ```java
    @Service
    @FundTransfer(
      transformSpeed = TransformMode.NORMAL,
      bankType = BankType.SAME)
    public class NormalSameBank
     implements FundTransferService {
    }
    ```
4. 自动装配

    ```java
    @Getter
    @Component
    public class FundTransferProcessor {

        @Autowired
        @FundTransfer(transformSpeed = TransformMode.IMMEDIATE, bankType = BankType.SAME)
        private FundTransferService sameBankImmediateFundTransferService;

        @Autowired
        @FundTransfer(transformSpeed = TransformMode.IMMEDIATE, bankType = BankType.DIFF)
        private FundTransferService diffBankImmediateFundTransferService;

        @Autowired
        @FundTransfer(transformSpeed = TransformMode.NORMAL, bankType = BankType.SAME)
        private FundTransferService sameBankNormalFundTransferService;

        @Autowired
        @FundTransfer(transformSpeed = TransformMode.NORMAL, bankType = BankType.DIFF)
        private FundTransferService diffBankNormalFundTransferService;
    }
    ```

‍

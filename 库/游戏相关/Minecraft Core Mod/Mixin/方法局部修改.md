# 方法局部修改

`@Redirect` 注解允许取消原先的某些方法调用，替换为被修饰方法

* 被修饰方法的返回值和形参列表与被调用的方法相同；若重定向的是父类构造，则需要该方法为 `static` 的
* `method`：修改方法名
* `at`：注入点，详见[[#@At]]，只允许 `INVOKE` 与 `FIELD` 类型

`@ModifyArg` 注解允许修改某个传入参数

* 被修饰方法返回值必须与形参类型相同；被修饰方法的形参为以下三种情况之一：

  * 被修改参数的原本值
  * target 指向目标的所有参数
  * target 指向目标的所有参数和目标方法的所有参数
* `method`：修改方法名
* `at`：注入点，详见[[#@At]]，只允许 `INVOKE` 类型
* `index`：修改的第 i 个对应类型的参数

`@ModifyArgs` 注解允许批量修改传入参数。被修饰函数返回值为 `void`，且第一个参数为 `Args` 类型参数，其余与 `@ModifyArg` 类似。

`@ModifyConstant` 用于修改 `LDC`，`*CONST_*`，`*IPUSH` 等操作码引用的常量

* `method`：修改方法名
* `constant`：匹配常量值

`@ModifyVariable` 用于修改局部变量

* 被修饰方法的返回值为被修改变量类型，只有一个形参也是被修改变量类型，其值为原始值
* `method`：修改方法名
* `at`：注入点
* `print`：输出所有局部变量
* `ordinal`：被修改局部变量在相同类型的变量的索引
* `index`：被修改局部变量在局部变量表中的索引
* `name`：局部变量名称
* `argsOnly`：若为 true，只匹配方法参数

# 数据类型

MATLAB 支持多种数据类型，包括内置的数值、逻辑、字符串、函数句柄、结构体、单元数组，以及用于高级交叉编程的用户类类型和 Java 类类型

不同于 c 等，MATLAB 会自动进行变量分配和回收，不需要单独声明

## 数值

### 实数

| 类型                          | 说明                 |
| ----------------------------- | -------------------- |
| int8, int16, int32, int64     | 8, 16, 32, 64 位整型 |
| uint8, uint16, uint32, uint64 | 无符号整型           |
| single, double                | 单精度, 双精度浮点   |

- 数据类型同时也是转换函数，可用于将其他类型转换成对应类型
- MATLAB 默认类型为双精度浮点，因此其他类型都需要使用转换函数

```matlab
a = 10.0
b = int8(20)
c = single(2.5)
d = 5
```

![[Pasted image 20230301174239.png]]

除了强制转换函数，MATLAB 还有从浮点数向整数取整的方法

| 函数  | 说明     |
| ----- | -------- |
| floor | 向下取整 |
| ceil  | 向上取整 |
| round | 四舍五入 |
| fix   | 向零取整 | 

单精度浮点数不能与整型进行混合算术运算

双精度浮点数与其他类型运算，与数值类型运算则返回其他类型，与逻辑、字符串运算时返回双精度

由于浮点数占用空间有限，其实际代表的值是离散的。使用 `eps` 函数可以获取给定值与对应的浮点数之间的差

![[Pasted image 20230301175944.png]]

### 复数

默认使用 `i` 或 `j` 表示复数部分

```matlab
a = 1 + 3i
b = 2.5 - 4j
c = a + b
```

![[Pasted image 20230302140604.png]]

也可以使用 complex 函数创建：`complex(实部[, 虚部=0])`

```matlab
% d = 3.0 + 0.0i
d = complex(3)
% e = 3.0 + 5.0i
e = complex(3, 5)
```

其他有关复数的函数有：

| 函数  | 说明     |
| ----- | -------- |
| real  | 返回实部 |
| imag  | 返回虚部 |
| abs   | 返回模   |
| angle | 返回辐角 |
| conj  | 共轭复数 |

### 其他

MATLAB 中使用 `Inf` 和 `-Inf` 表示无穷量，使用 `NaN` 表示非数值量
- 无穷量通常由于运算结果产生溢出，其类型默认双精度浮点
- `NaN` 通常是由于 `0/0` 或 `Inf/Inf` 等非正常运算产生，其类型默认双精度浮点
- 非数：运算所得结果超出运算范围，表示为 `NaN + Inf i` 的虚数
- 类似 js，`NaN` 彼此之间互不相等

## 逻辑

逻辑类型 logical 包含 `true` 与 `false` 两个值，输出或隐式转换为数值类型时分别为 1 或 0。

逻辑类型可以通过手动赋值 `true` 或 `false` 创建，也可以通过关系操作符（`>`，`==`）等。

逻辑运算符支持 `&|!` 与或非运算。其他逻辑相关方法有：

| 函数      | 说明                      |
| --------- | ------------------------- |
| xor(x, y) | 亦或                      |
| any(x)    | 向量或矩阵是否非 0        |
| isempty   | 容器（数组等）是否为空    |
| isinf     | 给定值是否为 Inf 或 -Inf  |
| isnan     | 给定值是否为 NaN          |
| isfinite  | 给定值是否非 Inf 且非 NaN |
| isletter  | 给定值是否为字母          |
| isreal    | 给定值是否是实数          |
| isspace   | 给定值是否为空格          |
| isstr     | 给定值是否为字符串        |
| isglobal  | 变量是否为全局变量        |
| ishold    | 当前绘图状态是否为 ON     |
| isstudent | MATLAB 是否为学生版       |
| isieee    | 系统是否进行 IEEE 运算    |
| isunix    | 系统是否为 Unix           |

## 字符串

字符串一般是指 ASCII 数组，使用 `''` 包围，以向量的形式存储。

字符数组支持下标访问，字符矩阵也同样支持，但每行文本的字符数必须相同。

同时 MATLAB 也包含 `string` 类型值，可以通过 `string()` 和 `char()` 进行字符串、字符数组互相转换。

## 数组

MATLAB 中，数组强调元素对元素的运算，矩阵则使用线性代数运算。可使用 `[]` 构造，元素间使用空格或 `,` 分隔，使用 `;` 换行；也可创建空数组，默认元素类型为 double

同一个数组只能保存相同类型的值

```matlab
% [1,2,3]
a = [1 2 3]
% '345'
b = ['3' '4' '5']
% []
c = []
```

也可以使用 `:` 生成数组，格式为 `起点[:步长=1]`:终点：

```MATLAB
a = 3:5
b = 2:2:9
```

![[Pasted image 20230302145817.png]]

同时，也可以使用 `linspace` 生成等距数组：`linspace(起点, 终点[, 个数=100])` 

```matlab
% [1,1.222222222222222,1.444444444444444,1.666666666666667,
%    1.888888888888889,2.111111111111111,2.333333333333333,
%    2.555555555555555,2.777777777777778,3]
a = linspace(1, 3, 10)
```

![[Pasted image 20230302150322.png]]

使用 `size(arr)` 函数可以获数组长度，返回一个数组 `[维度 长度]`。

使用 `[a1 a2 ...]` 可将多个数组连接成一个新数组。

在将数组应用于处理元素的方法或运算符时，会对数组中每一个元素进行对应运算，并返回结果数组。

使用 `arr(i)` 访问数组中的第 i 个元素，元素下标从 1 开始。

## 单元数组

单元数组为一种可以存储多个不同类型数据的数组，使用 `{}` 创建，使用 `,` 或 ` ` 分割元素，使用 `;` 换行

```matlab
a = {'abc',[1;3;4];10,pi}
```

![[Pasted image 20230302161734.png]]

也可以通过 `cell(m, n)` 函数生成 $m\times n$ 的单元数组，填充 double(0)

```matlab
cell(2, 3)
```

![[Pasted image 20230302162126.png]]

使用 `arr{i, j}` 访问数组第 i 行第 j 个元素，而使用 `arr(i, j)` 则可以访问第 i 行第 j 个元素对应的单元，将对应元素设置为 `[]` 即可将该元素设为空（截图中每一个但单元格均为空元素）

![[Pasted image 20230302164416.png]]

使用 `reshape(arr, s, t)` 调整数组大小为 $s\times t$

## 函数句柄

一个文件只能有一个与文件名相同的函数，称为主函数。其他函数只能在该文件中中被调回用。函数句柄通过 `@函数名` 创建，用于在一个文件中导出多个函数。

所有 MATLAB 提供的库函数和用户函数都可以创建函数引用，用于函数的间接调用。

```MATLAB
f = @cos
% 等同于 cos(3)
c3 = f(3)
```

有关函数句柄的函数有：

| 函数                        | 说明                                                    |
| --------------------------- | ------------------------------------------------------- |
| functions                   | 返回带有被引用函数函数名、函数类型、所在 M 文件的结构体 |
| func2str, str2func          | 函数句柄与函数名字符串之间相互转化                      |
| isa(var, 'function_handle') | 检查变量 var 是否为函数句柄                             |
| isequal(a, b)               | 函数句柄是否指向同一个函数                              |

## 结构体

类似 C 结构体，将多个不同类型的数据聚合成同一个类型。

创建结构体可直接使用 `变量名.字段名=字段值` 的形式将某个变量作为结构体使用，或向结构体添加/修改字段。 

```matlab
a.size = 7
a.fun = @cos
a.description = 'a struct with 7 and cos function'
```

![[Pasted image 20230302155106.png]]

或通过 `struct` 方法创建：
- `struct(key1, value1, key2, value2, ...)`
- `struct([])` 可用于创建空结构体
- `struct(obj)` 可用于将对象复制为结构体

使用 `arr(n)=struct(...)` 用于创建结构体数组，第 n 个值为 `struct` 函数创建的结构体，其余元素包含与 `arr(n)` 相同的结构（字段名），但值为 `[]`

```matlab
ScheduleArray(5) = struct('day', 'Thursday', 'time', '18:00', 'number', 10)
```

![[Pasted image 20230302160340.png]]

也可以使用 `repmat` 函数将所有元素都设置为对应值

```matlab
Schedules = repmat(struct('day', 'Thursday', 'time', '18:00', 'number', 10), 1, 5)
```

![[Pasted image 20230302160716.png]]

## map

map 表示一种映射，将一个键映射为一个值，使用 `constainers.Map` 创建
- `containers.Map()`：空映射

![[Pasted image 20230302165928.png]]

- `containers.Map(keySet, valueSet[, 'UniformValues', isUniform])`

![[Pasted image 20230302165941.png]]

- `containers.Map('KeyType', keyType, 'ValueType', valueType)`

![[Pasted image 20230302165955.png]]

键：可以为 $1\times n$ 字符串，整数或浮点，其类型保存在 map 对象的 `KeyType` 属性中

值：任意类型类型保存在 map 对象的 `ValueType` 属性中

`Count` 属性表示 map 中的元素个数。`Count`，`KeyType`，`ValueType` 不可以通过 `.` 直接修改

使用 `对象名(key)` 方法访问 map 中保存的值；通过 `keys` 和 `values` 函数查看所有键和值

```matlab
keys = {'aaa', 'bbb', 'ccc'}
values = {123, 456, 789}
map = containers.Map(keys, values)

% {'aaa'}    {'bbb'}    {'ccc'}
map.keys

% {[123]}    {[456]}    {[789]}
map.values

% 123
map('aaa')
```

![[Pasted image 20230302170500.png]]

使用 `remove(map对象名, key)` 移除元素，`map对象名(key)=value` 修改元素

## 矩阵

MATLAB 中，矩阵以数组形式存在，单行数组表示向量，多行数组表示矩阵。
- $1\times1$ 的矩阵称为标量
- $1\times n$ 或 $n\times1$ 的矩阵称为向量，n 为其长度
- $0\times0$，$0\times n$，$n\times0$ 的矩阵称为空矩阵

### 创建矩阵

矩阵可以直接使用数组 `[]` 创建，也可以用其他函数创建特殊矩阵，其中，$1，$2，$3，$4 表示几种可接受的参数类型

| 函数        | 说明                                                                           |
| ----------- | ------------------------------------------------------------------------------ |
| magic(n)    | 创建一个 $n\times n$ 每行每列元素和相等的矩阵                                  | 
| ones($1)    | 1矩阵（全部元素均为 1）                                                        |
| zeros($1)   | 0矩阵（全部元素均为 0）                                                        |
| eye($1)     | 单位矩阵                                                                       |
| rand($2)    | 随机数矩阵，每个元素均为 0~1 的随机数                                          |
| randn($2)   | 每个元素为零均值、单位方差的正态分布随机数                                     |
| diag($3)     | 确定对角线的矩阵，V 为一个向量，对角线值为 V 每一个分量值                      |
| triu($4)    | 上三角矩阵                                                                     |
| tri($4)     | 下三角矩阵                                                                     |

- $1：按通常方法创建矩阵，或根据已有矩阵创建
	- 接受一个整数 n，创建一个 $n\times n$ 矩阵
	- 接受一组任意个数数值 `m, n, ..., p`，表示创建一个 $m\times n\times\cdots\times p$ 矩阵
	- 接受一个 `size(M)` 表达式或值，其中 M 为另一个矩阵，表示创建与 M 大小相同的矩阵
- $2：按通常方法创建矩阵，可接受 $1 的前两种情况
- $3：对角线矩阵
	- 接受一个长度为 v 的向量 V，创建一个 $v\times v$ 的矩阵，对角线值为 V 每一个分量值
	- 接受一个长度为 v 的向量 V 和一个数值 k，创建一个$(v+|k|)\times(v+|k|)$ 矩阵，其第 k 条对角线值为向量 V 的每个分量值
	- 接受一个矩阵 M，返回该矩阵的对角线组成的向量
	- 接受一个矩阵 M 和一个数值 k，创建一个与 M 大小相同的矩阵，且其第 k 条对角线与 M 相同
- $4：上、下三角矩阵
	- 接受一个矩阵 M，创建一个与 M 相同大小的矩阵，其上/下三角元素与 M 相同
	- 接受一个矩阵 M 和一个数值 k，创建一个与 M 相同大小的矩阵，其第 k 条对角线上/下的元素与 M 相同

其中，第 k 条对角线表示：k=0 表示主对角线，k>0 表示主对角线下方第 k 条对角线，k<0 表示主对角线上方第 -k 条对角线

### 结构变更

| 函数名                              | 说明                                                                                                |
| ----------------------------------- | --------------------------------------------------------------------------------------------------- |
| `fliplr(M)`                         | 逆序排列每一行                                                                                      |
| `flipud(M)`                         | 逆序排列每一列                                                                                      |
| `flipdim(M, dim)`                   | 沿给定维度反转矩阵                                                                                  |
| `rot90(M[, k=1])`                   | 生成一个由矩阵 M 逆时针旋转 $k\times90^{\circ}$ 生成的矩阵                                          |
| `reshape(M, [d1, d2, ...])`         | 生成$d1\times d2\times\cdots$ 大小的矩阵，并复制 M 矩阵中的元素，新矩阵与 M 元素个数必须相同        |
| `reshape(M, d1, d2, ...)`           | `reshape(M, [d1, d2, ...])`                                                                         |
| `repmat(M, [d1, d2, ...])`          | 生成$d1\times d2\times\cdots$ 大小的矩阵，创建与 M 矩阵内容的相同（重复多次）                       |
| `shiftdim(M, n)`                    | 返回将 M 的维度向左移动 n 次的新矩阵                                                                | 
| `squeeze(M)`                        | 返回没有空维的矩阵 M                                                                                |
| `cat(dim, M1, M2)`                  | 将 M1，M2 矩阵连接成一个 dim 维的新矩阵                                                             |
| `permute(M, order)`                 | 根据向量 order 改变矩阵 M 的维度顺序                                                                |
| `ipermute(M, order)`                | permute 的逆运算                                                                                    |
| `sort(M[, dim=1[, mode='ascend']])` | 对矩阵 M 进行排序<br>dim=1 时对列排序，2 对行排序<br>mode='ascend' 时升序排序，'descend' 时降序排序 |
| `[B, IX]=sort(M, ...)`              | IX 为排序后备元素在原矩阵中行位置或列位置索引                                                       |

### 下标引用

### 其他信息

### 保存与加载

# 运算符

# 字符串
---
语言: cpp
语法类型: 基础语法
---
返回值是函数完成后传递给调用者的执行结果。

```cpp
int sum(int a, int b) {
    // 这一句进行的操作：
    //   创建一个临时变量 t = a + b（可以在内存或寄存器中）
    //   将 t 的值复制一份，返回给调用位置
    return a + b;
}
```

值类型会回传对应值的副本。一般编译器会使用 `move` 优化，实际效率非常高。

返回类型是引用时不会进行复制，但一般不会返回引用。直接返回在一个函数中创建的自动变量的引用是非常危险的

> [!danger] **永远不要**返回一个在函数栈中创建的对象的指针或引用，也不要将其以任何方法传递到函数之外

原因：函数中的自动变量位于函数栈中，函数返回时栈内存自动释放，释放后的内存不可预测。

- [[尾置返回值]]
- [[返回值优化]]